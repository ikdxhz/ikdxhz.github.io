<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/jpeg" href="91.jpg">
    <title>黑白贪吃蛇</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            overflow: hidden;
            background-color: black;
        }
        
        #gameCanvas {
            display: block;
            width: 100vw;
            height: 100vh;
            background-color: black;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0,0,0,0.85);
            overflow: auto;
            pointer-events: all !important;
        }
        .modal-content {
            background: #000;
            color: #fff;
            margin: 10% auto;
            padding: 30px 20px;
            border-radius: 10px;
            width: 90vw;
            max-width: 600px;
            text-align: center;
            border: 2px solid #fff;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }
        .creator-name {
            font-size: 40px;
            font-weight: bold;
            margin: 20px 0;
            background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient 5s linear infinite;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .name-list-box {
            max-height: 300px;
            min-height: 100px;
            overflow-y: auto;
            border: 1px solid #fff;
            border-radius: 6px;
            padding: 10px;
            margin-top: 20px;
            background: rgba(0,0,0,0.5);
            color: #fff;
            font-size: 16px;
            text-align: left;
        }
        .name-list-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 20px;
        }
        .name-list-section h4 {
            margin-bottom: 10px;
            color: #fff;
            border-bottom: 1px solid #555;
            padding-bottom: 5px;
        }
        .admin-title {
            font-size: 24px;
            font-weight: bold;
            color: gold;
            margin: 15px 0;
            text-shadow: 0 0 5px rgba(255,215,0,0.5);
        }
        h3 {
            margin-top: 20px;
            color: #fff;
            font-size: 26px;
        }
        .image-container {
            margin-bottom: 20px;
            max-width: 100%;
            overflow: hidden;
        }
        .project-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            border: 2px solid #fff;
        }
        .comments-section {
            margin-top: 30px;
            border-top: 1px solid #fff;
            padding-top: 20px;
        }
        .comment {
            display: flex;
            align-items: start;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }
        .comment-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            border: 2px solid #fff;
        }
        .comment-content {
            flex: 1;
        }
        .comment-author {
            color: #fff;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .comment-text {
            color: #ddd;
            line-height: 1.5;
        }
        .comment-time {
            color: #888;
            font-size: 12px;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div id="constructionModal" class="modal">
        <div class="modal-content">
            <h2>网站正在施工中</h2>
            <div id="creator"></div>
            <div id="nameList">
                <h3>项目贡献者名单</h3>
                <div class="admin-title">吴锦鸿 - 超级管理员 | 站长 | 首席架构师 | 技术总监 | 创始人</div>
                <div class="name-list-box all-names"></div>
            </div>
            <div class="image-container">
                <img src="91.jpg" alt="项目图片" class="project-image">
            </div>
            <div class="comments-section">
                <h3>评论区</h3>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">吴锦鸿</div>
                        <div class="comment-text">这个项目太棒了！期待正式上线！</div>
                        <div class="comment-time">2024-03-21 10:30</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">张明</div>
                        <div class="comment-text">界面设计很精美，功能也很实用！</div>
                        <div class="comment-time">2024-03-21 11:15</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">李华</div>
                        <div class="comment-text">支持站长，期待更多精彩内容！</div>
                        <div class="comment-time">2024-03-21 12:00</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">王芳</div>
                        <div class="comment-text">黑白风格很有特色，玩起来很舒服！</div>
                        <div class="comment-time">2024-03-21 12:45</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">刘伟</div>
                        <div class="comment-text">操作流畅，游戏体验很棒！</div>
                        <div class="comment-time">2024-03-21 13:20</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">陈静</div>
                        <div class="comment-text">这个设计太有创意了，点赞！</div>
                        <div class="comment-time">2024-03-21 14:05</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">赵强</div>
                        <div class="comment-text">期待更多新功能！</div>
                        <div class="comment-time">2024-03-21 14:50</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">杨丽</div>
                        <div class="comment-text">界面简洁大方，很喜欢！</div>
                        <div class="comment-time">2024-03-21 15:35</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">周杰</div>
                        <div class="comment-text">这个项目很有潜力，加油！</div>
                        <div class="comment-time">2024-03-21 16:20</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">吴婷</div>
                        <div class="comment-text">设计感很强，期待正式版！</div>
                        <div class="comment-time">2024-03-21 17:05</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">郑阳</div>
                        <div class="comment-text">操作简单，容易上手！</div>
                        <div class="comment-time">2024-03-21 17:50</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">林雪</div>
                        <div class="comment-text">黑白配色很有格调！</div>
                        <div class="comment-time">2024-03-21 18:35</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">黄明</div>
                        <div class="comment-text">游戏体验很流畅，赞！</div>
                        <div class="comment-time">2024-03-21 19:20</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">孙芳</div>
                        <div class="comment-text">期待更多新功能上线！</div>
                        <div class="comment-time">2024-03-21 20:05</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">马超</div>
                        <div class="comment-text">界面设计很专业！</div>
                        <div class="comment-time">2024-03-21 20:50</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">朱琳</div>
                        <div class="comment-text">支持站长，加油！</div>
                        <div class="comment-time">2024-03-21 21:35</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">胡杰</div>
                        <div class="comment-text">期待正式版发布！</div>
                        <div class="comment-time">2024-03-21 22:20</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">郭静</div>
                        <div class="comment-text">设计很有创意！</div>
                        <div class="comment-time">2024-03-21 23:05</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">何强</div>
                        <div class="comment-text">游戏体验很棒！</div>
                        <div class="comment-time">2024-03-22 00:00</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">罗丽</div>
                        <div class="comment-text">期待更多新功能！</div>
                        <div class="comment-time">2024-03-22 00:45</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">梁杰</div>
                        <div class="comment-text">界面设计很精美！</div>
                        <div class="comment-time">2024-03-22 01:30</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">宋雪</div>
                        <div class="comment-text">黑白风格很有特色！</div>
                        <div class="comment-time">2024-03-22 02:15</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">唐明</div>
                        <div class="comment-text">操作简单，容易上手！</div>
                        <div class="comment-time">2024-03-22 03:00</div>
                    </div>
                </div>
                <div class="comment">
                    <img src="91.jpg" alt="用户头像" class="comment-avatar">
                    <div class="comment-content">
                        <div class="comment-author">许芳</div>
                        <div class="comment-text">期待正式版发布！</div>
                        <div class="comment-time">2024-03-22 03:45</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <canvas id="gameCanvas"></canvas>
    
    <script>
        // 显示弹窗并设置制作者
        document.getElementById('constructionModal').style.display = 'block';
        document.getElementById('creator').innerText = '吴锦宏';
        document.getElementById('creator').className = 'creator-name';
        
        // 确保弹窗无法关闭
        window.onkeydown = function(e) {
            if (e.key === 'Escape') {
                e.preventDefault();
                return false;
            }
        };
        
        // 阻止点击事件传播
        document.getElementById('constructionModal').addEventListener('click', function(e) {
            e.stopPropagation();
        });
        
        // 英文名数组（87个国外名字）
        const foreignNames = [
          "James Wilson", "Emma Thompson", "Michael Brown", "Sarah Davis", "David Miller",
          "Jennifer White", "Robert Johnson", "Lisa Anderson", "William Taylor", "Mary Wilson",
          "John Smith", "Patricia Moore", "Richard Lee", "Elizabeth Clark", "Charles Hall",
          "Margaret Lewis", "Thomas Walker", "Susan Young", "Daniel Allen", "Nancy King",
          "Paul Wright", "Karen Scott", "Mark Green", "Betty Baker", "Donald Adams",
          "Helen Nelson", "George Carter", "Ruth Mitchell", "Edward Perez", "Sharon Roberts",
          "Joseph Turner", "Deborah Phillips", "Christopher Campbell", "Michelle Parker",
          "Kevin Evans", "Laura Edwards", "Brian Collins", "Donna Stewart", "Ronald Morris",
          "Carol Rogers", "Steven Reed", "Dorothy Cook", "Kenneth Morgan", "Rebecca Murphy",
          "Jason Bailey", "Shirley Cooper", "Gary Richardson", "Virginia Cox", "Timothy Howard",
          "Anna Ward", "Ronald Torres", "Brenda Peterson", "Jerry Gray", "Pamela Hughes",
          "Henry Butler", "Kathleen Simmons", "Samuel Foster", "Martha Bryant", "Russell Alexander",
          "Evelyn Russell", "Bobby Griffin", "Frances Diaz", "Ralph Hayes", "Jean Sanders",
          "Eugene Price", "Lois Bennett", "Howard Wood", "Alice Barnes", "Raymond Ross",
          "Diane Henderson", "Carl Coleman", "Janet Jenkins", "Arthur Perry", "Marilyn Powell",
          "Ryan Patterson", "Norma Hughes", "Larry Flores", "Joyce Butler", "Walter Simmons",
          "Virginia Foster", "Fred Foster", "Ruby Bennett", "Harold Bryant", "Phyllis Alexander"
        ];

        // 中文名数组（256个中国名字）
        const chineseNames = [
          "王伟", "王芳", "李伟", "李娜", "张伟", "刘伟", "王秀英", "李秀英", "张秀英", "刘秀英",
          "王敏", "李敏", "张敏", "刘敏", "王静", "李静", "张静", "刘静", "王丽", "李丽",
          "张丽", "刘丽", "王强", "李强", "张强", "刘强", "王磊", "李磊", "张磊", "刘磊",
          "王军", "李军", "张军", "刘军", "王洋", "李洋", "张洋", "刘洋", "王勇", "李勇",
          "张勇", "刘勇", "王艳", "李艳", "张艳", "刘艳", "王杰", "李杰", "张杰", "刘杰",
          // 更多中文名字
          "王娟", "李娟", "张娟", "刘娟", "王涛", "李涛", "张涛", "刘涛", "王明", "李明",
          "张明", "刘明", "王超", "李超", "张超", "刘超", "王霞", "李霞", "张霞", "刘霞",
          "王平", "李平", "张平", "刘平", "王刚", "李刚", "张刚", "刘刚", "王桂英", "李桂英",
          "张桂英", "刘桂英", "王丹", "李丹", "张丹", "刘丹", "王萍", "李萍", "张萍", "刘萍",
          "王红", "李红", "张红", "刘红", "王玉兰", "李玉兰", "张玉兰", "刘玉兰", "王欢", "李欢",
          "张欢", "刘欢", "王玲", "李玲", "张玲", "刘玲", "王桂兰", "李桂兰", "张桂兰", "刘桂兰",
          "王秀兰", "李秀兰", "张秀兰", "刘秀兰", "王英", "李英", "张英", "刘英", "王梅", "李梅",
          "张梅", "刘梅", "王莉", "李莉", "张莉", "刘莉", "王玉梅", "李玉梅", "张玉梅", "刘玉梅",
          "王丽娟", "李丽娟", "张丽娟", "刘丽娟", "王秀珍", "李秀珍", "张秀珍", "刘秀珍", "王桂珍", "李桂珍",
          "张桂珍", "刘桂珍", "王秀荣", "李秀荣", "张秀荣", "刘秀荣", "王秀云", "李秀云", "张秀云", "刘秀云",
          "王秀芳", "李秀芳", "张秀芳", "刘秀芳", "王建国", "李建国", "张建国", "刘建国", "王建华", "李建华",
          "张建华", "刘建华", "王建军", "李建军", "张建军", "刘建军", "王建平", "李建平", "张建平", "刘建平",
          "王建明", "李建明", "张建明", "刘建明", "王建设", "李建设", "张建设", "刘建设", "王国强", "李国强",
          "张国强", "刘国强", "王国平", "李国平", "张国平", "刘国平", "王国华", "李国华", "张国华", "刘国华",
          "王国军", "李国军", "张国军", "刘国军", "王国庆", "李国庆", "张国庆", "刘国庆", "王志强", "李志强",
          "张志强", "刘志强", "王志国", "李志国", "张志国", "刘志国", "王志华", "李志华", "张志华", "刘志华",
          "王志军", "李志军", "张志军", "刘志军", "王志明", "李志明", "张志明", "刘志明", "王志勇", "李志勇",
          "张志勇", "刘志勇", "王学军", "李学军", "张学军", "刘学军", "王学明", "李学明", "张学明", "刘学明",
          "王学华", "李学华", "张学华", "刘学华", "王学勇", "李学勇", "张学勇", "刘学勇", "王学文", "李学文",
          "张学文", "刘学文", "王学英", "李学英", "张学英", "刘学英", "王学志", "李学志", "张学志", "刘学志"
        ];

        // 随机排序函数
        function shuffle(array) {
          for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
          }
          return array;
        }

        // 随机排序并显示名单
        document.querySelector('.all-names').innerHTML = 
          shuffle([...foreignNames, ...chineseNames]).map(name => `<div>${name}</div>`).join('');

        // 获取画布及其上下文
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        
        // 确保画布填满整个窗口
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        
        // 监听窗口大小变化
        window.addEventListener('resize', resizeCanvas);
        
        // 初始化画布大小
        resizeCanvas();

        // 游戏参数
        const gridSize = 20; // 网格大小
        let speed = 100; // 蛇移动速度（毫秒）
        
        // 得分系统
        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        
        // 蛇的初始位置和状态
        let snake = [
            {x: Math.floor(canvas.width / 2 / gridSize) * gridSize, 
             y: Math.floor(canvas.height / 2 / gridSize) * gridSize}
        ];
        
        // 初始方向（右）
        let dx = gridSize;
        let dy = 0;
        
        // 食物位置
        let food = {};
        
        // 游戏是否进行中
        let gameRunning = false;
        
        // 触摸控制变量
        let touchStartX = 0;
        let touchStartY = 0;
        
        // 生成随机食物
        function createFood() {
            // 确保食物在画布内的网格位置上
            food = {
                x: Math.floor(Math.random() * (canvas.width / gridSize)) * gridSize,
                y: Math.floor(Math.random() * (canvas.height / gridSize)) * gridSize
            };
            
            // 确保食物不会出现在蛇身上
            for (let i = 0; i < snake.length; i++) {
                if (snake[i].x === food.x && snake[i].y === food.y) {
                    createFood(); // 如果重叠了就重新生成
                    break;
                }
            }
        }
        
        // 绘制蛇
        function drawSnake() {
            ctx.fillStyle = 'white';
            snake.forEach(segment => {
                ctx.fillRect(segment.x, segment.y, gridSize, gridSize);
            });
        }
        
        // 绘制食物
        function drawFood() {
            ctx.fillStyle = 'white';
            ctx.fillRect(food.x, food.y, gridSize, gridSize);
        }
        
        // 清除画布
        function clearCanvas() {
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }
        
        // 绘制得分
        function drawScore() {
            ctx.fillStyle = 'white';
            ctx.font = '20px Arial';
            ctx.textAlign = 'left';
            ctx.fillText(`分数: ${score}`, 10, 30);
            ctx.fillText(`最高分: ${highScore}`, 10, 60);
        }
        
        // 移动蛇
        function moveSnake() {
            // 创建蛇的新头部
            const head = {
                x: snake[0].x + dx,
                y: snake[0].y + dy
            };
            
            // 将新头部添加到蛇身体前端
            snake.unshift(head);
            
            // 检查是否吃到食物
            if (head.x === food.x && head.y === food.y) {
                // 吃到食物，生成新的食物并加分
                score += 10;
                
                // 更新最高分
                if (score > highScore) {
                    highScore = score;
                    localStorage.setItem('snakeHighScore', highScore);
                }
                
                // 生成新食物
                createFood();
            } else {
                // 没吃到食物，移除蛇尾
                snake.pop();
            }
        }
        
        // 检查游戏是否结束
        function checkGameOver() {
            const head = snake[0];
            
            // 检查是否撞墙
            if (
                head.x < 0 || 
                head.x >= canvas.width || 
                head.y < 0 || 
                head.y >= canvas.height
            ) {
                return true;
            }
            
            // 检查是否撞到自己
            for (let i = 1; i < snake.length; i++) {
                if (head.x === snake[i].x && head.y === snake[i].y) {
                    return true;
                }
            }
            
            return false;
        }
        
        // 游戏主循环
        function gameLoop() {
            if (!gameRunning) return;
            
            setTimeout(() => {
                clearCanvas();
                moveSnake();
                
                if (checkGameOver()) {
                    gameRunning = false;
                    alert(`游戏结束！\n你的分数: ${score}\n最高分: ${highScore}`);
                    return;
                }
                
                drawFood();
                drawSnake();
                drawScore();
                
                gameLoop();
            }, speed);
        }
        
        // 处理键盘按键
        function changeDirection(event) {
            const LEFT_KEY = 37;
            const RIGHT_KEY = 39;
            const UP_KEY = 38;
            const DOWN_KEY = 40;
            
            // 防止按键过快导致蛇掉头咬到自己
            const keyPressed = event.keyCode;
            const goingUp = dy === -gridSize;
            const goingDown = dy === gridSize;
            const goingLeft = dx === -gridSize;
            const goingRight = dx === gridSize;
            
            if (keyPressed === LEFT_KEY && !goingRight) {
                dx = -gridSize;
                dy = 0;
            }
            
            if (keyPressed === RIGHT_KEY && !goingLeft) {
                dx = gridSize;
                dy = 0;
            }
            
            if (keyPressed === UP_KEY && !goingDown) {
                dx = 0;
                dy = -gridSize;
            }
            
            if (keyPressed === DOWN_KEY && !goingUp) {
                dx = 0;
                dy = gridSize;
            }
        }
        
        // 处理触摸事件
        function handleTouchStart(event) {
            if (!gameRunning) {
                startGame();
                return;
            }
            
            touchStartX = event.touches[0].clientX;
            touchStartY = event.touches[0].clientY;
        }
        
        function handleTouchMove(event) {
            if (!gameRunning || !touchStartX || !touchStartY) {
                return;
            }
            
            event.preventDefault(); // 防止页面滚动
            
            const touchEndX = event.touches[0].clientX;
            const touchEndY = event.touches[0].clientY;
            
            const diffX = touchEndX - touchStartX;
            const diffY = touchEndY - touchStartY;
            
            const goingUp = dy === -gridSize;
            const goingDown = dy === gridSize;
            const goingLeft = dx === -gridSize;
            const goingRight = dx === gridSize;
            
            // 只有当swipe距离足够长时才改变方向
            if (Math.abs(diffX) > Math.abs(diffY)) {
                // 水平滑动
                if (diffX > 0 && !goingLeft) {
                    // 向右滑
                    dx = gridSize;
                    dy = 0;
                } else if (diffX < 0 && !goingRight) {
                    // 向左滑
                    dx = -gridSize;
                    dy = 0;
                }
            } else {
                // 垂直滑动
                if (diffY > 0 && !goingUp) {
                    // 向下滑
                    dx = 0;
                    dy = gridSize;
                } else if (diffY < 0 && !goingDown) {
                    // 向上滑
                    dx = 0;
                    dy = -gridSize;
                }
            }
            
            // 重置触摸起点，使得连续滑动可以继续改变方向
            touchStartX = touchEndX;
            touchStartY = touchEndY;
        }
        
        // 开始游戏
        function startGame() {
            // 初始化蛇
            snake = [
                {x: Math.floor(canvas.width / 2 / gridSize) * gridSize, 
                 y: Math.floor(canvas.height / 2 / gridSize) * gridSize}
            ];
            
            // 重置方向
            dx = gridSize;
            dy = 0;
            
            // 重置分数
            score = 0;
            
            // 创建第一个食物
            createFood();
            
            // 设置游戏为运行状态
            gameRunning = true;
            
            // 启动游戏循环
            gameLoop();
        }
        
        // 为键盘和触摸事件添加监听器
        document.addEventListener('keydown', changeDirection);
        canvas.addEventListener('touchstart', handleTouchStart, false);
        canvas.addEventListener('touchmove', handleTouchMove, false);
        
        // 点击画布开始/重新开始游戏
        canvas.addEventListener('click', function() {
            if (!gameRunning) {
                startGame();
            }
        });
        
        // 显示开始游戏提示
        function showStartMessage() {
            ctx.fillStyle = 'white';
            ctx.font = '30px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('点击屏幕开始游戏', canvas.width/2, canvas.height/2);
            ctx.font = '20px Arial';
            ctx.fillText('使用方向键或滑动控制蛇', canvas.width/2, canvas.height/2 + 40);
        }
        
        // 初始显示开始游戏提示
        clearCanvas();
        showStartMessage();
    </script>
</body>
</html> 